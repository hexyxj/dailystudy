## 闭包
- 什么是:即重用变量,又保护变量不被污染的一种机制
- 为什么:
    - 全局变量和局部变量各有优缺点
    - 全局变量:优点:可重用! 缺点:污染,随处可用!
    - 局部变量:优点:仅函数内可用,不会污染全局;缺点:不可重用
- 何时:只要既重用一个变量,又保护变量不被污染时,可以使用闭包
- 如何:
    1. 用外层函数包裹要保护的变量和操作变量的函数
    2. 外层函数将内层函数的对象返回到外部
    3. 使用者调用外层函数,可以获取内层函数对象
    `````````
    function outer(){
        var i=1;
        return function(){
            console.log(i++);
        }
    }
    var getNum=outer();
    // getNum:function(){ console.log(i++); }
    // i本该被释放
    getNum();//1
    getNum();//2
    getNum();//3
    `````````
- 原因:形成闭包的原因,外层函数调用后,外层函数的作用域对象(AO)无法释放,被内层函数对象的scope引用着
- 缺点:
    1. 比普通函数占用更多内存,外层函数的作用域对象(AO)始终存在
    2. 容易造成内存泄漏
        - 内存泄露是指一块被分配的内存既不能使用,又不能回收,直到浏览器进程结束.
- 释放闭包
    - 将引用内层函数对象的外部变量置为null,释放内层函数对象,外层函数的AO被释放
- 简图:
    1. 找受保护的的变量，确定外层函数调用后，受保护变量的最终值
    2. 找操作受保护的变量的内层函数对象
    3. 结论:同一次外层函数调用，返回的内层函数对象，共用同一个受保护的变量